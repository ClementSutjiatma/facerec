<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<title>OpenCV: YOLO DNNs</title>
<link href="../../opencv.ico" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../tutorial-utils.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
//<![CDATA[
MathJax.Hub.Config(
{
  TeX: {
      Macros: {
          matTT: [ "\\[ \\left|\\begin{array}{ccc} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{array}\\right| \\]", 9],
          fork: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ \\end{array} \\right.", 4],
          forkthree: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ \\end{array} \\right.", 6],
          forkfour: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ #7 & \\mbox{#8}\\\\ \\end{array} \\right.", 8],
          vecthree: ["\\begin{bmatrix} #1\\\\ #2\\\\ #3 \\end{bmatrix}", 3],
          vecthreethree: ["\\begin{bmatrix} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{bmatrix}", 9],
          hdotsfor: ["\\dots", 1],
          mathbbm: ["\\mathbb{#1}", 1],
          bordermatrix: ["\\matrix{#1}", 1]
      }
  }
}
);
//]]>
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../opencv-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenCV
   &#160;<span id="projectnumber">3.4.1</span>
   </div>
   <div id="projectbrief">Open Source Computer Vision</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/df8/tutorial_root.html">OpenCV Tutorials</a></li><li class="navelem"><a class="el" href="../../d2/d58/tutorial_table_of_content_dnn.html">Deep Neural Networks (dnn module)</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">YOLO DNNs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction </h2>
<p class="">In this text you will learn how to use opencv_dnn module using yolo_object_detection (Sample of using OpenCV dnn module in real time with device capture, video and image).</p>
<p class="">We will demonstrate results of this example on the following picture. </p><div class="image">
<img src="../../yolo.jpg" alt="yolo.jpg"/>
<div class="caption">
Picture example</div></div>
 <h2>Examples </h2>
<p class="">VIDEO DEMO: </p><div align='center'><iframe title='Video' width='560' height='349' src='https://www.youtube.com/embed/NHtRlndE2cg?rel=0' frameborder='0' align='middle' allowfullscreen></iframe></div><h2>Source Code </h2>
<p class="">The latest version of sample source code can be downloaded <a href="https://github.com/opencv/opencv/blob/master/samples/dnn/yolo_object_detection.cpp">here</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// Brief Sample of using OpenCV dnn module in real time with device capture, video and image.</span></div><div class="line"><span class="comment">// VIDEO DEMO: https://www.youtube.com/watch?v=NHtRlndE2cg</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d9/d8c/dnn_8hpp.html">opencv2/dnn.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d1/ddb/shape__utils_8hpp.html">opencv2/dnn/shape_utils.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../dd/d46/imgproc_8hpp.html">opencv2/imgproc.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d4/dd5/highgui_8hpp.html">opencv2/highgui.hpp</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="../../d8/dcc/namespacestd.html">std</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="../../d2/d75/namespacecv.html">cv</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="../../df/d57/namespacecv_1_1dnn.html">cv::dnn</a>;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* about =</div><div class="line"><span class="stringliteral">&quot;This sample uses You only look once (YOLO)-Detector (https://arxiv.org/abs/1612.08242) to detect objects on camera/video/image.\n&quot;</span></div><div class="line"><span class="stringliteral">&quot;Models can be downloaded here: https://pjreddie.com/darknet/yolo/\n&quot;</span></div><div class="line"><span class="stringliteral">&quot;Default network is 416x416.\n&quot;</span></div><div class="line"><span class="stringliteral">&quot;Class names can be downloaded here: https://github.com/pjreddie/darknet/tree/master/data\n&quot;</span>;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* params =</div><div class="line"><span class="stringliteral">&quot;{ help           | false | print usage         }&quot;</span></div><div class="line"><span class="stringliteral">&quot;{ cfg            |       | model configuration }&quot;</span></div><div class="line"><span class="stringliteral">&quot;{ model          |       | model weights       }&quot;</span></div><div class="line"><span class="stringliteral">&quot;{ camera_device  | 0     | camera device number}&quot;</span></div><div class="line"><span class="stringliteral">&quot;{ source         |       | video or image for detection}&quot;</span></div><div class="line"><span class="stringliteral">&quot;{ out            |       | path to output video file}&quot;</span></div><div class="line"><span class="stringliteral">&quot;{ fps            | 3     | frame per second }&quot;</span></div><div class="line"><span class="stringliteral">&quot;{ style          | box   | box or line style draw }&quot;</span></div><div class="line"><span class="stringliteral">&quot;{ min_confidence | 0.24  | min confidence      }&quot;</span></div><div class="line"><span class="stringliteral">&quot;{ class_names    |       | File with class names, [PATH-TO-DARKNET]/data/coco.names }&quot;</span>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">    <a class="code" href="../../d0/d2e/classcv_1_1CommandLineParser.html">CommandLineParser</a> parser(argc, argv, params);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (parser.get&lt;<span class="keywordtype">bool</span>&gt;(<span class="stringliteral">&quot;help&quot;</span>))</div><div class="line">    {</div><div class="line">        cout &lt;&lt; about &lt;&lt; endl;</div><div class="line">        parser.printMessage();</div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a> modelConfiguration = parser.get&lt;<a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a>&gt;(<span class="stringliteral">&quot;cfg&quot;</span>);</div><div class="line">    <a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a> modelBinary = parser.get&lt;<a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a>&gt;(<span class="stringliteral">&quot;model&quot;</span>);</div><div class="line"></div><div class="line">    <a class="code" href="../../db/d30/classcv_1_1dnn_1_1Net.html">dnn::Net</a> net = <a class="code" href="../../d6/d0f/group__dnn.html#gafde362956af949cce087f3f25c6aff0d">readNetFromDarknet</a>(modelConfiguration, modelBinary);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (net.empty())</div><div class="line">    {</div><div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;Can&#39;t load network by using the following files: &quot;</span> &lt;&lt; endl;</div><div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;cfg-file:     &quot;</span> &lt;&lt; modelConfiguration &lt;&lt; endl;</div><div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;weights-file: &quot;</span> &lt;&lt; modelBinary &lt;&lt; endl;</div><div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;Models can be downloaded here:&quot;</span> &lt;&lt; endl;</div><div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;https://pjreddie.com/darknet/yolo/&quot;</span> &lt;&lt; endl;</div><div class="line">        exit(-1);</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="../../d8/dfe/classcv_1_1VideoCapture.html">VideoCapture</a> cap;</div><div class="line">    <a class="code" href="../../dd/d9e/classcv_1_1VideoWriter.html">VideoWriter</a> writer;</div><div class="line">    <span class="keywordtype">int</span> codec = <a class="code" href="../../dd/d01/group__videoio__c.html#gac005718f121379beffdbdbfb44f2646a">CV_FOURCC</a>(<span class="charliteral">&#39;M&#39;</span>, <span class="charliteral">&#39;J&#39;</span>, <span class="charliteral">&#39;P&#39;</span>, <span class="charliteral">&#39;G&#39;</span>);</div><div class="line">    <span class="keywordtype">double</span> fps = parser.get&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;fps&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (parser.get&lt;<a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a>&gt;(<span class="stringliteral">&quot;source&quot;</span>).<a class="code" href="../../d1/d8f/classcv_1_1String.html#af8c705770e7d91a8fa895127590e1c40">empty</a>())</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> cameraDevice = parser.get&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;camera_device&quot;</span>);</div><div class="line">        cap = <a class="code" href="../../d8/dfe/classcv_1_1VideoCapture.html">VideoCapture</a>(cameraDevice);</div><div class="line">        <span class="keywordflow">if</span>(!cap.isOpened())</div><div class="line">        {</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Couldn&#39;t find camera: &quot;</span> &lt;&lt; cameraDevice &lt;&lt; endl;</div><div class="line">            <span class="keywordflow">return</span> -1;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        cap.open(parser.get&lt;<a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a>&gt;(<span class="stringliteral">&quot;source&quot;</span>));</div><div class="line">        <span class="keywordflow">if</span>(!cap.isOpened())</div><div class="line">        {</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Couldn&#39;t open image or video: &quot;</span> &lt;&lt; parser.get&lt;<a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a>&gt;(<span class="stringliteral">&quot;video&quot;</span>) &lt;&lt; endl;</div><div class="line">            <span class="keywordflow">return</span> -1;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(!parser.get&lt;<a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a>&gt;(<span class="stringliteral">&quot;out&quot;</span>).<a class="code" href="../../d1/d8f/classcv_1_1String.html#af8c705770e7d91a8fa895127590e1c40">empty</a>())</div><div class="line">    {</div><div class="line">        writer.<a class="code" href="../../dd/d9e/classcv_1_1VideoWriter.html#a0901c353cd5ea05bba455317dab81130">open</a>(parser.get&lt;<a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a>&gt;(<span class="stringliteral">&quot;out&quot;</span>), codec, fps, <a class="code" href="../../d6/d50/classcv_1_1Size__.html">Size</a>((<span class="keywordtype">int</span>)cap.get(<a class="code" href="../../d4/d15/group__videoio__flags__base.html#ggaeb8dd9c89c10a5c63c139bf7c4f5704dab26d2ba37086662261148e9fe93eecad">CAP_PROP_FRAME_WIDTH</a>),(int)cap.get(<a class="code" href="../../d4/d15/group__videoio__flags__base.html#ggaeb8dd9c89c10a5c63c139bf7c4f5704dad8b57083fd9bd58e0f94e68a54b42b7e">CAP_PROP_FRAME_HEIGHT</a>)), 1);</div><div class="line">    }</div><div class="line"></div><div class="line">    vector&lt;String&gt; classNamesVec;</div><div class="line">    ifstream classNamesFile(parser.get&lt;<a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a>&gt;(<span class="stringliteral">&quot;class_names&quot;</span>).<a class="code" href="../../d1/d8f/classcv_1_1String.html#a86c0eb08ef6c38fedfbe515a98dbe91c">c_str</a>());</div><div class="line">    <span class="keywordflow">if</span> (classNamesFile.is_open())</div><div class="line">    {</div><div class="line">        <span class="keywordtype">string</span> className = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line">        <span class="keywordflow">while</span> (std::getline(classNamesFile, className))</div><div class="line">            classNamesVec.push_back(className);</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a> object_roi_style = parser.get&lt;<a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a>&gt;(<span class="stringliteral">&quot;style&quot;</span>);</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span>(;;)</div><div class="line">    {</div><div class="line">        <a class="code" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> frame;</div><div class="line">        cap &gt;&gt; frame; <span class="comment">// get a new frame from camera/video or read image</span></div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (frame.empty())</div><div class="line">        {</div><div class="line">            <a class="code" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">waitKey</a>();</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (frame.channels() == 4)</div><div class="line">            <a class="code" href="../../d7/d1b/group__imgproc__misc.html#ga397ae87e1288a81d2363b61574eb8cab">cvtColor</a>(frame, frame, <a class="code" href="../../d7/d1b/group__imgproc__misc.html#gga4e0972be5de079fed4e3a10e24ef5ef0a3a7148dd1537f09d35b69690b0548798">COLOR_BGRA2BGR</a>);</div><div class="line"></div><div class="line">        <a class="code" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> inputBlob = <a class="code" href="../../d6/d0f/group__dnn.html#ga152367f253c81b53fe6862b299f5c5cd">blobFromImage</a>(frame, 1 / 255.F, <a class="code" href="../../dc/d84/group__core__basic.html#ga346f563897249351a34549137c8532a0">Size</a>(416, 416), <a class="code" href="../../dc/d84/group__core__basic.html#ga599fe92e910c027be274233eccad7beb">Scalar</a>(), <span class="keyword">true</span>, <span class="keyword">false</span>); <span class="comment">//Convert Mat to batch of images</span></div><div class="line"><span class="comment"></span></div><div class="line">        net.setInput(inputBlob, <span class="stringliteral">&quot;data&quot;</span>);                   <span class="comment">//set the network input</span></div><div class="line"><span class="comment"></span></div><div class="line">        <a class="code" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> detectionMat = net.forward(<span class="stringliteral">&quot;detection_out&quot;</span>);   <span class="comment">//compute output</span></div><div class="line"><span class="comment"></span></div><div class="line">        vector&lt;double&gt; layersTimings;</div><div class="line">        <span class="keywordtype">double</span> tick_freq = <a class="code" href="../../db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c">getTickFrequency</a>();</div><div class="line">        <span class="keywordtype">double</span> time_ms = net.getPerfProfile(layersTimings) / tick_freq * 1000;</div><div class="line">        <a class="code" href="../../d6/d6e/group__imgproc__draw.html#ga5126f47f883d730f633d74f07456c576">putText</a>(frame, format(<span class="stringliteral">&quot;FPS: %.2f ; time: %.2f ms&quot;</span>, 1000.f / time_ms, time_ms),</div><div class="line">                <a class="code" href="../../dc/d84/group__core__basic.html#ga1e83eafb2d26b3c93f09e8338bcab192">Point</a>(20, 20), 0, 0.5, <a class="code" href="../../dc/d84/group__core__basic.html#ga599fe92e910c027be274233eccad7beb">Scalar</a>(0, 0, 255));</div><div class="line"></div><div class="line">        <span class="keywordtype">float</span> confidenceThreshold = parser.get&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;min_confidence&quot;</span>);</div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; detectionMat.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#abed816466c45234254d25bc59c31245e">rows</a>; i++)</div><div class="line">        {</div><div class="line">            <span class="keyword">const</span> <span class="keywordtype">int</span> probability_index = 5;</div><div class="line">            <span class="keyword">const</span> <span class="keywordtype">int</span> probability_size = detectionMat.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a> - probability_index;</div><div class="line">            <span class="keywordtype">float</span> *prob_array_ptr = &amp;detectionMat.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#aa5d20fc86d41d59e4d71ae93daee9726">at</a>&lt;<span class="keywordtype">float</span>&gt;(i, probability_index);</div><div class="line"></div><div class="line">            <span class="keywordtype">size_t</span> objectClass = max_element(prob_array_ptr, prob_array_ptr + probability_size) - prob_array_ptr;</div><div class="line">            <span class="keywordtype">float</span> confidence = detectionMat.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#aa5d20fc86d41d59e4d71ae93daee9726">at</a>&lt;<span class="keywordtype">float</span>&gt;(i, (int)objectClass + probability_index);</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (confidence &gt; confidenceThreshold)</div><div class="line">            {</div><div class="line">                <span class="keywordtype">float</span> x_center = detectionMat.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#aa5d20fc86d41d59e4d71ae93daee9726">at</a>&lt;<span class="keywordtype">float</span>&gt;(i, 0) * frame.cols;</div><div class="line">                <span class="keywordtype">float</span> y_center = detectionMat.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#aa5d20fc86d41d59e4d71ae93daee9726">at</a>&lt;<span class="keywordtype">float</span>&gt;(i, 1) * frame.rows;</div><div class="line">                <span class="keywordtype">float</span> width = detectionMat.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#aa5d20fc86d41d59e4d71ae93daee9726">at</a>&lt;<span class="keywordtype">float</span>&gt;(i, 2) * frame.cols;</div><div class="line">                <span class="keywordtype">float</span> height = detectionMat.<a class="code" href="../../d3/d63/classcv_1_1Mat.html#aa5d20fc86d41d59e4d71ae93daee9726">at</a>&lt;<span class="keywordtype">float</span>&gt;(i, 3) * frame.rows;</div><div class="line">                <a class="code" href="../../db/d4e/classcv_1_1Point__.html">Point</a> p1(<a class="code" href="../../db/de0/group__core__utils.html#ga085eca238176984a0b72df2818598d85">cvRound</a>(x_center - width / 2), <a class="code" href="../../db/de0/group__core__utils.html#ga085eca238176984a0b72df2818598d85">cvRound</a>(y_center - height / 2));</div><div class="line">                <a class="code" href="../../db/d4e/classcv_1_1Point__.html">Point</a> p2(<a class="code" href="../../db/de0/group__core__utils.html#ga085eca238176984a0b72df2818598d85">cvRound</a>(x_center + width / 2), <a class="code" href="../../db/de0/group__core__utils.html#ga085eca238176984a0b72df2818598d85">cvRound</a>(y_center + height / 2));</div><div class="line">                <a class="code" href="../../d2/d44/classcv_1_1Rect__.html">Rect</a> object(p1, p2);</div><div class="line"></div><div class="line">                <a class="code" href="../../d1/da0/classcv_1_1Scalar__.html">Scalar</a> object_roi_color(0, 255, 0);</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (object_roi_style == <span class="stringliteral">&quot;box&quot;</span>)</div><div class="line">                {</div><div class="line">                    <a class="code" href="../../d6/d6e/group__imgproc__draw.html#ga07d2f74cadcf8e305e810ce8eed13bc9">rectangle</a>(frame, <span class="keywordtype">object</span>, object_roi_color);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    <a class="code" href="../../db/d4e/classcv_1_1Point__.html">Point</a> p_center(<a class="code" href="../../db/de0/group__core__utils.html#ga085eca238176984a0b72df2818598d85">cvRound</a>(x_center), <a class="code" href="../../db/de0/group__core__utils.html#ga085eca238176984a0b72df2818598d85">cvRound</a>(y_center));</div><div class="line">                    <a class="code" href="../../d6/d6e/group__imgproc__draw.html#ga7078a9fae8c7e7d13d24dac2520ae4a2">line</a>(frame, <span class="keywordtype">object</span>.tl(), p_center, object_roi_color, 1);</div><div class="line">                }</div><div class="line"></div><div class="line">                <a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a> className = objectClass &lt; classNamesVec.size() ? classNamesVec[objectClass] : cv::format(<span class="stringliteral">&quot;unknown(%d)&quot;</span>, objectClass);</div><div class="line">                <a class="code" href="../../d1/d8f/classcv_1_1String.html">String</a> label = format(<span class="stringliteral">&quot;%s: %.2f&quot;</span>, className.<a class="code" href="../../d1/d8f/classcv_1_1String.html#a86c0eb08ef6c38fedfbe515a98dbe91c">c_str</a>(), confidence);</div><div class="line">                <span class="keywordtype">int</span> baseLine = 0;</div><div class="line">                <a class="code" href="../../d6/d50/classcv_1_1Size__.html">Size</a> labelSize = <a class="code" href="../../d6/d6e/group__imgproc__draw.html#ga3d2abfcb995fd2db908c8288199dba82">getTextSize</a>(label, <a class="code" href="../../d0/de1/group__core.html#gga0f9314ea6e35f99bb23f29567fc16e11afff8b973668df2e4028dddc5274310c9">FONT_HERSHEY_SIMPLEX</a>, 0.5, 1, &amp;baseLine);</div><div class="line">                <a class="code" href="../../d6/d6e/group__imgproc__draw.html#ga07d2f74cadcf8e305e810ce8eed13bc9">rectangle</a>(frame, <a class="code" href="../../dc/d84/group__core__basic.html#ga11d95de507098e90bad732b9345402e8">Rect</a>(p1, <a class="code" href="../../dc/d84/group__core__basic.html#ga346f563897249351a34549137c8532a0">Size</a>(labelSize.<a class="code" href="../../d6/d50/classcv_1_1Size__.html#abfe0367b32c407ddccf5ddf92667c73d">width</a>, labelSize.<a class="code" href="../../d6/d50/classcv_1_1Size__.html#a1d289dce6b5d8006a54f3ee0259fc545">height</a> + baseLine)),</div><div class="line">                          object_roi_color, <a class="code" href="../../d0/de1/group__core.html#ggaf076ef45de481ac96e0ab3dc2c29a777a89c5f6beef080e6df347167f85e07b9e">FILLED</a>);</div><div class="line">                <a class="code" href="../../d6/d6e/group__imgproc__draw.html#ga5126f47f883d730f633d74f07456c576">putText</a>(frame, label, p1 + <a class="code" href="../../dc/d84/group__core__basic.html#ga1e83eafb2d26b3c93f09e8338bcab192">Point</a>(0, labelSize.<a class="code" href="../../d6/d50/classcv_1_1Size__.html#a1d289dce6b5d8006a54f3ee0259fc545">height</a>),</div><div class="line">                        <a class="code" href="../../d0/de1/group__core.html#gga0f9314ea6e35f99bb23f29567fc16e11afff8b973668df2e4028dddc5274310c9">FONT_HERSHEY_SIMPLEX</a>, 0.5, <a class="code" href="../../d1/da0/classcv_1_1Scalar__.html">Scalar</a>(0,0,0));</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span>(writer.<a class="code" href="../../dd/d9e/classcv_1_1VideoWriter.html#a9a40803e5f671968ac9efa877c984d75">isOpened</a>())</div><div class="line">        {</div><div class="line">            writer.<a class="code" href="../../dd/d9e/classcv_1_1VideoWriter.html#a3115b679d612a6a0b5864a0c88ed4b39">write</a>(frame);</div><div class="line">        }</div><div class="line"></div><div class="line">        <a class="code" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">imshow</a>(<span class="stringliteral">&quot;YOLO: Detections&quot;</span>, frame);</div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">waitKey</a>(1) &gt;= 0) <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">} <span class="comment">// main</span></div></div><!-- fragment --><h2>How to compile in command line with pkg-config </h2>
<div class="fragment"><div class="line"># g++ `pkg-config --cflags opencv` `pkg-config --libs opencv` yolo_object_detection.cpp -o yolo_object_detection</div></div><!-- fragment --><p class="">Execute in webcam:</p>
<div class="fragment"><div class="line">$ yolo_object_detection -camera_device=0  -cfg=[PATH-TO-DARKNET]/cfg/yolo.cfg -model=[PATH-TO-DARKNET]/yolo.weights   -class_names=[PATH-TO-DARKNET]/data/coco.names</div></div><!-- fragment --><p class="">Execute with image:</p>
<div class="fragment"><div class="line">$ yolo_object_detection -source=[PATH-IMAGE]  -cfg=[PATH-TO-DARKNET]/cfg/yolo.cfg -model=[PATH-TO-DARKNET]/yolo.weights   -class_names=[PATH-TO-DARKNET]/data/coco.names</div></div><!-- fragment --><p class="">Execute in video file:</p>
<div class="fragment"><div class="line">$ yolo_object_detection -source=[PATH-TO-VIDEO] -cfg=[PATH-TO-DARKNET]/cfg/yolo.cfg -model=[PATH-TO-DARKNET]/yolo.weights   -class_names=[PATH-TO-DARKNET]/data/coco.names</div></div><!-- fragment --><p class="">Questions and suggestions email to: Alessandro de Oliveira Faria <a href="#" onclick="location.href='mai'+'lto:'+'cab'+'el'+'o@o'+'pe'+'nsu'+'se'+'.or'+'g'; return false;">cabel<span style="display: none;">.nosp@m.</span>o@op<span style="display: none;">.nosp@m.</span>ensus<span style="display: none;">.nosp@m.</span>e.or<span style="display: none;">.nosp@m.</span>g</a> or OpenCV Team. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 8 2018 20:51:57 for OpenCV by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
